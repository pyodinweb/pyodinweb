<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyOdin Web - Samsung Firmware Flasher</title>
    
    <!-- Google Analytics with Consent Mode v2 -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);} 
        gtag('consent', 'default', {
            'analytics_storage': 'denied',
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'functionality_storage': 'granted',
            'personalization_storage': 'denied',
            'security_storage': 'granted'
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KM0JNZ7JBC"></script>
    <script>
        gtag('js', new Date());
        gtag('config', 'G-KM0JNZ7JBC', {
            'anonymize_ip': true,
            'allow_google_signals': false,
            'allow_ad_personalization_signals': false
        });
    </script>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1263613699773711"
         crossorigin="anonymous"></script>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🔥</text></svg>">

    <!-- SEO Meta Tags -->
    <meta name="description" content="PyOdin Web - Advanced browser-based Samsung firmware flashing tool. Free Odin3 and Odin4 alternative using WebUSB technology. Flash Samsung Galaxy firmware directly from your browser without installing desktop software.">
    <meta name="keywords" content="Samsung, Odin3, Odin4, Flashing, Samsung firmware, Odin alternative, WebUSB flasher, Samsung Galaxy flash, browser firmware tool, PyOdin, Samsung Odin web, firmware flashing online, Samsung developer tool, Galaxy firmware update, flash Samsung online, Odin web version">
    <meta name="author" content="PyOdin Development Team">
    <meta name="robots" content="index, follow">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="PyOdin Web - Samsung Firmware Flasher | Free Odin3/Odin4 Alternative">
    <meta property="og:description" content="Browser-based Samsung firmware flashing tool using WebUSB. Free alternative to Odin3 and Odin4. Flash Samsung Galaxy firmware directly from your browser.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pyodin.web/">
    <meta property="og:site_name" content="PyOdin Web">
    <meta property="og:image" content="https://pyodin.web/og-image.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PyOdin Web - Samsung Firmware Flasher">
    <meta name="twitter:description" content="Free Odin3/Odin4 alternative. Flash Samsung firmware directly in your browser using WebUSB technology.">
    <meta name="twitter:image" content="https://pyodin.web/twitter-card.png">
    
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --dark-color: #343a40;
            --light-color: #f8f9fa;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
            margin-bottom: 20px;
        }

        .section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }

        .section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .section-title {
            font-size: 1.5em;
            color: var(--dark-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.3);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40,167,69,0.3);
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .file-upload {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            background: #fafafa;
        }

        .file-upload:hover {
            border-color: var(--primary-color);
            background: #f0f7ff;
        }

        .file-upload.active {
            border-color: var(--primary-color);
            background: #e3f2fd;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
        }

        .device-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--danger-color);
            box-shadow: 0 0 10px rgba(220,53,69,0.5);
            animation: pulse 2s infinite;
        }

        .status-indicator.connected {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(40,167,69,0.5);
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .device-info {
            flex: 1;
        }

        .device-info h3 {
            margin-bottom: 5px;
            color: var(--dark-color);
        }

        .device-info p {
            color: var(--secondary-color);
            font-size: 0.9em;
        }

        .progress-container {
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #667eea);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .progress-info {
            margin-top: 10px;
            color: var(--secondary-color);
            font-size: 0.9em;
        }

        .log-container {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: var(--border-radius);
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 5px;
        }

        .log-entry.error {
            color: #f48771;
        }

        .log-entry.success {
            color: #89d185;
        }

        .log-entry.warning {
            color: #f5d889;
        }

        .log-entry.info {
            color: #569cd6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-option label {
            cursor: pointer;
            user-select: none;
        }

        .alert {
            padding: 15px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid var(--warning-color);
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid var(--danger-color);
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.8;
        }

        .footer a {
            color: white;
            text-decoration: underline;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .partition-input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            background: white;
            transition: var(--transition);
        }

        .partition-input:hover {
            border-color: var(--primary-color);
        }

        .partition-input input[type="file"] {
            cursor: pointer;
        }

        .partition-input input[type="file"]::-webkit-file-upload-button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .partition-input input[type="file"]::-webkit-file-upload-button:hover {
            background: #0056b3;
        }

        .partition-file-name {
            display: block;
            margin-top: 8px;
            font-size: 0.85em;
            color: #666;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            width: 100%;
            min-width: 0;
        }
        
        .partition-input {
            min-width: 0;
        }

        .partition-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 1200px) {
            .partition-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .partition-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Modal/Disclaimer Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 100%;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-content h2 {
            color: var(--danger-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-content p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #333;
        }

        .modal-content ul {
            margin: 15px 0;
            padding-left: 25px;
        }

        .modal-content li {
            margin: 8px 0;
            line-height: 1.6;
        }

        /* Donation Section */
        .donation-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            margin-top: 40px;
            text-align: center;
            border-radius: var(--border-radius);
        }

        .donation-section h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .donation-section p {
            margin: 10px 0;
            opacity: 0.95;
        }

        .bitcoin-address {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: bold;
            margin: 20px auto;
            max-width: 500px;
            word-break: break-all;
            cursor: pointer;
            transition: var(--transition);
        }

        .bitcoin-address:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.02);
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .firmware-items {
            background: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
        }

        .firmware-item {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .firmware-item:last-child {
            border-bottom: none;
        }

        .firmware-item-name {
            font-weight: 600;
            color: var(--dark-color);
        }

        .firmware-item-size {
            color: var(--secondary-color);
            font-size: 0.9em;
        }

        .hidden {
            display: none !important;
        }

        /* Cookie Consent Banner */
        #cookieConsent {
            position: fixed;
            bottom: -100%;
            left: 0;
            right: 0;
            background: rgba(52, 58, 64, 0.98);
            backdrop-filter: blur(10px);
            color: white;
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            transition: bottom 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        #cookieConsent.show {
            bottom: 0;
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .cookie-text {
            flex: 1;
            min-width: 300px;
        }

        .cookie-text p {
            margin: 0;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .cookie-text a {
            color: #4dabf7;
            text-decoration: underline;
            cursor: pointer;
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .cookie-btn.accept {
            background: #28a745;
            color: white;
        }

        .cookie-btn.accept:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
        }

        .cookie-btn.decline {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .cookie-btn.decline:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 768px) {
            .cookie-content {
                flex-direction: column;
                align-items: stretch;
            }

            .cookie-buttons {
                width: 100%;
            }

            .cookie-btn {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔥 PyOdin Web</h1>
            <p>Samsung Firmware Flasher - Powered by WebUSB</p>
        </div>

        <div class="main-card">
            <!-- WebUSB Support Check -->
            <div id="webusb-warning" class="alert alert-danger hidden">
                <strong>⚠️ WebUSB Not Supported</strong>
                <p>Your browser doesn't support WebUSB API. Please use Chrome, Edge, or Opera (version 61+).</p>
            </div>

            <!-- Device Connection Section -->
            <div class="section">
                <h2 class="section-title">Device Connection</h2>
                
                <div class="device-status">
                    <div class="status-indicator" id="status-indicator"></div>
                    <div class="device-info">
                        <h3 id="device-status-text">No Device Connected</h3>
                        <p id="device-info-text">Put your Samsung device in Download Mode and click "Connect Device"</p>
                    </div>
                    <button class="btn btn-primary" id="connect-btn" onclick="connectDevice()">
                        Connect Device
                    </button>
                </div>

                <div class="alert alert-info">
                    <strong>ℹ️ How to enter Download Mode:</strong>
                    <p>1. Power off your device completely<br>
                    2. Press and hold Volume Down + Bixby/Home + Power<br>
                    3. When warning appears, press Volume Up to continue</p>
                </div>

                <div class="alert alert-warning" style="cursor: pointer;" onclick="toggleWindowsNote()" id="windows-alert">
                    <strong>🪟 Windows Users - Click to expand</strong>
                    <div id="windows-note-content" style="display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid #856404;">
                        <p><strong>Important:</strong> On Windows, you need to install the WinUSB driver for your Samsung device using Zadig:</p>
                        <p>1. Download <a href="https://zadig.akeo.ie/" target="_blank" style="color: #856404; text-decoration: underline;">Zadig</a><br>
                        2. Put your Samsung device in Download Mode<br>
                        3. Open Zadig and select your Samsung device from the list<br>
                        4. Select "WinUSB" from the driver dropdown<br>
                        5. Click "Replace Driver" or "Install Driver"<br>
                        6. Wait for the installation to complete<br>
                        7. Refresh this page and try connecting again</p>
                        <p style="font-size: 0.9em; opacity: 0.9;">⚠️ This will replace the existing Samsung driver with WinUSB, which is required for WebUSB to work.</p>
                    </div>
                </div>
            </div>

            <!-- Firmware Selection Section -->
            <div class="section">
                <h2 class="section-title">Firmware Selection</h2>
                
                <div class="partition-grid">
                    <!-- BL -->
                    <div class="partition-input">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color);">
                            BL (Bootloader)
                        </label>
                        <input type="file" id="file-bl" accept=".tar,.tar.md5" onchange="handlePartitionSelect('BL', event)" 
                               style="display: block; width: 100%;">
                        <span id="file-bl-name" class="partition-file-name" title="">No file selected</span>
                    </div>
                    
                    <!-- AP -->
                    <div class="partition-input">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color);">
                            AP (System)
                        </label>
                        <input type="file" id="file-ap" accept=".tar,.tar.md5" onchange="handlePartitionSelect('AP', event)"
                               style="display: block; width: 100%;">
                        <span id="file-ap-name" class="partition-file-name" title="">No file selected</span>
                    </div>
                    
                    <!-- CP -->
                    <div class="partition-input">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color);">
                            CP (Modem)
                        </label>
                        <input type="file" id="file-cp" accept=".tar,.tar.md5" onchange="handlePartitionSelect('CP', event)"
                               style="display: block; width: 100%;">
                        <span id="file-cp-name" class="partition-file-name" title="">No file selected</span>
                    </div>
                    
                    <!-- CSC -->
                    <div class="partition-input">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary-color);">
                            CSC (Region/Carrier)
                        </label>
                        <input type="file" id="file-csc" accept=".tar,.tar.md5" onchange="handlePartitionSelect('CSC', event)"
                               style="display: block; width: 100%;">
                        <span id="file-csc-name" class="partition-file-name" title="">No file selected</span>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="loadSelectedPartitions()" id="load-firmware-btn" style="width: 100%;">
                    Load Selected Files
                </button>

                <div id="firmware-info" class="hidden">
                    <div class="file-info">
                        <h4>Firmware Information</h4>
                        <p><strong>File:</strong> <span id="firmware-name"></span></p>
                        <p><strong>Size:</strong> <span id="firmware-size"></span></p>
                        <p><strong>Type:</strong> <span id="firmware-type"></span></p>
                        <p><strong>MD5:</strong> <span id="firmware-md5">Calculating...</span></p>
                    </div>
                    <div id="firmware-items-container" class="hidden">
                        <h4 style="margin-top: 15px; margin-bottom: 10px;">Firmware Contents:</h4>
                        <div class="firmware-items" id="firmware-items"></div>
                    </div>
                </div>
            </div>

            <!-- Flash Options Section -->
            <div class="section">
                <h2 class="section-title">Flash Options</h2>
                
                <div class="options-grid">
                    <div class="checkbox-option">
                        <input type="checkbox" id="option-verify" checked>
                        <label for="option-verify">Verify Firmware Hash</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="option-reboot" checked>
                        <label for="option-reboot">Auto Reboot After Flash</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="option-verbose" checked>
                        <label for="option-verbose">Verbose Logging</label>
                    </div>
                </div>

                <div class="button-group" style="margin-top: 20px;">
                    <button class="btn btn-success" id="flash-btn" onclick="startFlash()" disabled>
                        Start Flashing
                    </button>
                    <button class="btn btn-danger" id="stop-btn" onclick="stopFlash()" disabled>
                        Stop
                    </button>
                </div>

                <div class="alert alert-warning" style="margin-top: 20px;">
                    <strong>⚠️ Warning:</strong>
                    <p>Flashing firmware can brick your device if done incorrectly. Ensure firmware matches your device model, device is charged >70%, and use a good USB cable.</p>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="section">
                <h2 class="section-title">Progress</h2>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%">0%</div>
                    </div>
                    <div class="progress-info" id="progress-info">
                        Ready to flash
                    </div>
                </div>
            </div>

            <!-- Log Section -->
            <div class="section">
                <h2 class="section-title">Activity Log</h2>
                
                <div class="log-container" id="log-container">
                    <div class="log-entry info">PyOdin Web initialized - Ready to flash</div>
                    <div class="log-entry info">WebUSB API detected - Device connection available</div>
                </div>
            </div>
        </div>

        <div class="donation-section">
            <h3>💝 Support This Project</h3>
            <p>If PyOdin Web has been helpful to you, please consider supporting us with a Bitcoin donation!</p>
            
            <p style="margin-top: 20px; font-weight: 600;">Bitcoin Address:</p>
            <div class="bitcoin-address" onclick="copyBitcoinAddress()" title="Click to copy">
                3CSk7Ci4hFuPu24tdtkw5BE92SwRjaVvBs
            </div>
            
            <p style="font-size: 0.9em; opacity: 0.9;">Your donations help keep this project actively maintained. Thank you! 🙏</p>
        </div>

        <div class="footer">
            <p>PyOdin Web - Made with ❤️ by the PyOdin Developers</p>
            <p><a href="https://github.com/pyodin/pyodin" target="_blank">GitHub</a> | 
               <a href="#" onclick="alert('See README for documentation'); return false;">Documentation</a> | 
               Use at your own risk</p>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimer-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>⚠️ Important Disclaimer</h2>
            
            <p><strong>By using PyOdin Web, you acknowledge and agree to the following:</strong></p>
            
            <ul>
                <li>Flashing firmware can <strong>permanently damage or brick</strong> your device if done incorrectly.</li>
                <li>You assume <strong>all responsibility and risk</strong> for using this software.</li>
                <li>The developers are <strong>NOT LIABLE</strong> for any damage to your device, computer, data loss, or any other issues that may arise.</li>
                <li>This tool is provided "AS IS" without warranty of any kind.</li>
                <li>Always ensure you are using the <strong>correct firmware</strong> for your exact device model.</li>
                <li>Maintain a <strong>backup</strong> of important data before flashing.</li>
            </ul>
            
            <p style="margin-top: 20px;"><strong>Please proceed only if you understand and accept these risks.</strong></p>
            
            <button class="btn btn-danger" onclick="acceptDisclaimer()" style="width: 100%; margin-top: 20px; padding: 15px; font-size: 1.1em;">
                I Understand and Accept the Risks
            </button>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookieConsent">
        <div class="cookie-content">
            <div class="cookie-text">
                <p>
                    🍪 We use cookies for analytics and ads. All firmware data stays in your browser. 
                    <a onclick="showPrivacyPolicy()">Privacy Policy</a>
                </p>
            </div>
            <div class="cookie-buttons">
                <button class="cookie-btn accept" onclick="acceptCookies()">Accept</button>
                <button class="cookie-btn decline" onclick="declineCookies()">Decline</button>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <!-- SparkMD5 for fast MD5 hashing -->
    <script src="https://cdn.jsdelivr.net/npm/spark-md5@3.0.2/spark-md5.min.js"></script>
    <!-- pako for GZIP decompression -->
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <!-- LZ4 (browserified bundle with wrapper) -->
    <script src="lz4.min.js"></script>
    <script src="lz4-wrapper.js"></script>
    <script src="js/lz4-streaming.js"></script>
    <script src="js/nested-tar-parser.js"></script>
    <script src="js/zip-parser.js"></script>
    
    <!-- Core JavaScript Modules -->
    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/crypto-utils.js"></script>
    <script src="js/usb-device.js"></script>
    <script src="js/firmware-parser.js"></script>
    <script src="js/pit-parser.js"></script>
    <script src="js/download-engine.js"></script>
    <script src="js/flasher.js"></script>
    <script src="js/app.js"></script>

    <!-- Cookie Consent Script -->
    <script>
        function showPrivacyPolicy() {
            const policy = `PRIVACY POLICY

Last Updated: October 16, 2025

DATA PRIVACY
All user data and files remain in your browser and never leave your device. We do not upload, transmit, or store any of your files or personal data on our servers.

COOKIES AND ADVERTISING
We use cookies for essential functionality, analytics, and displaying personalized advertising through Google AdSense. You can decline non-essential cookies, which will disable ads and analytics.

YOUR RIGHTS (GDPR/CCPA)
You have the right to decline cookies and request information about or deletion of any data collected.

CONTACT
For privacy concerns, visit our GitHub repository.`;
            
            alert(policy);
        }

        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/;SameSite=Strict";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function deleteCookie(name) {
            document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }

        function acceptCookies() {
            setCookie('cookieConsent', 'accepted', 365);
            gtag('consent', 'update', {
                'analytics_storage': 'granted',
                'ad_storage': 'granted',
                'ad_user_data': 'granted',
                'ad_personalization': 'granted',
                'personalization_storage': 'granted'
            });
            gtag('event', 'page_view', { 'send_to': 'G-KM0JNZ7JBC' });
            if (window.adsbygoogle && window.adsbygoogle.loaded) {
                console.log('AdSense ready - Ads will display on next ad slot');
            }
            hideCookieBanner();
            console.log('✅ Cookies accepted - Analytics and ads enabled immediately');
        }

        function declineCookies() {
            gtag('consent', 'update', {
                'analytics_storage': 'denied',
                'ad_storage': 'denied',
                'ad_user_data': 'denied',
                'ad_personalization': 'denied',
                'personalization_storage': 'denied'
            });
            clearAnalyticsCookies();
            deleteCookie('cookieConsent');
            hideCookieBanner();
            console.log('❌ Cookies declined - You will be asked again on next visit');
        }

        function clearAnalyticsCookies() {
            const gaCookies = ['_ga', '_gat', '_gid', '_gat_gtag'];
            gaCookies.forEach(cookie => {
                deleteCookie(cookie);
                document.cookie = cookie + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=" + window.location.hostname;
            });
        }

        function loadAnalytics() {
            const consent = getCookie('cookieConsent');
            if (consent === 'accepted') {
                gtag('consent', 'update', {
                    'analytics_storage': 'granted',
                    'ad_storage': 'granted',
                    'ad_user_data': 'granted',
                    'ad_personalization': 'granted',
                    'personalization_storage': 'granted'
                });
                gtag('event', 'page_view', { 'send_to': 'G-KM0JNZ7JBC' });
                console.log('✅ Google Analytics and AdSense enabled');
            }
        }

        function hideCookieBanner() {
            const banner = document.getElementById('cookieConsent');
            banner.classList.remove('show');
        }

        function showCookieBanner() {
            const banner = document.getElementById('cookieConsent');
            setTimeout(() => { banner.classList.add('show'); }, 500);
        }

        window.addEventListener('DOMContentLoaded', () => {
            const consent = getCookie('cookieConsent');
            if (!consent) {
                showCookieBanner();
                console.log('ℹ️ Cookie consent banner displayed');
            } else if (consent === 'accepted') {
                gtag('consent', 'update', {
                    'analytics_storage': 'granted',
                    'ad_storage': 'granted',
                    'ad_user_data': 'granted',
                    'ad_personalization': 'granted',
                    'personalization_storage': 'granted'
                });
                loadAnalytics();
                console.log('✅ Returning user - Consent already accepted');
            }
        });
    </script>
</body>
</html>

